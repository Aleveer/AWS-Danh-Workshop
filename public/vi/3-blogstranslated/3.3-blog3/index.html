<!DOCTYPE html>
<html lang="vi" class="js csstransforms3d">
  <head><script src="/workshop-template/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=workshop-template/livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.152.2">
    <meta
  name="description"
  content=""
/>
<meta name="author" content="danhanh.nguyen1643@gmail.com" />

    <link rel="icon" href="../../../images/favicon.png" type="image/png">

    <title>Blog 3 :: Báo cáo thực tập</title>

    
    <link href="../../../css/nucleus.css?1765294694" rel="stylesheet">
    <link href="../../../css/fontawesome-all.min.css?1765294694" rel="stylesheet">
    <link href="../../../css/hybrid.css?1765294694" rel="stylesheet">
    <link href="../../../css/featherlight.min.css?1765294694" rel="stylesheet">
    <link href="../../../css/perfect-scrollbar.min.css?1765294694" rel="stylesheet">
    <link href="../../../css/auto-complete.css?1765294694" rel="stylesheet">
    <link href="../../../css/atom-one-dark-reasonable.css?1765294694" rel="stylesheet">
    <link href="../../../css/theme.css?1765294694" rel="stylesheet">
    <link href="../../../css/hugo-theme.css?1765294694" rel="stylesheet">
    
    <link href="../../../css/theme-workshop.css?1765294694" rel="stylesheet">
    
    

    <script src="../../../js/jquery-3.3.1.min.js?1765294694"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    

  </head>
  <body class="" data-url="../../../vi/3-blogstranslated/3.3-blog3/">
    <nav
  id="sidebar"
  class="showVisitedLinks"
>
   
  <div id="header-wrapper">
    <div id="header"><a id="logo" href="../../../">
  <svg
    id="Layer_1"
    data-name="Layer 1"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 60 30"
    width="30%"
  >
    <defs>
      <style>
        .cls-1 {
          fill: #fff;
        }
        .cls-2 {
          fill: #f90;
          fill-rule: evenodd;
        }
      </style>
    </defs>
    <title>AWS-Logo_White-Color</title>
    <path
      class="cls-1"
      d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"
    ></path>
    <path
      class="cls-2"
      d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"
    ></path>
    <path
      class="cls-2"
      d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"
    ></path>
  </svg>
</a>
</div>
     <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="../../../js/lunr.min.js?1765294694"></script>
<script type="text/javascript" src="../../../js/auto-complete.js?1765294694"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/localhost:1313\/workshop-template\/\/vi";
    
</script>
<script type="text/javascript" src="../../../js/search.js?1765294694"></script>
 
  </div>

  <div class="highlightable">
    <ul class="topics">
               
<li
  data-nav-id="/vi/1-worklog/"
  title="Nhật ký hàng tuần"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/">
     <b> 1. </b> Nhật ký hàng tuần 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
  <ul>
          
            
<li
  data-nav-id="/vi/1-worklog/1.1-week1/"
  title="Worklog Tuần 1"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.1-week1/">
     <b> 1.1. </b> Worklog Tuần 1 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.2-week2/"
  title="Worklog Tuần 2"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.2-week2/">
     <b> 1.2. </b> Worklog Tuần 2 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.3-week3/"
  title="Worklog Tuần 3"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.3-week3/">
     <b> 1.3. </b> Worklog Tuần 3 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.4-week4/"
  title="Worklog Tuần 4"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.4-week4/">
     <b> 1.4. </b> Worklog Tuần 4 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.5-week5/"
  title="Worklog Tuần 5"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.5-week5/">
     <b> 1.5. </b> Worklog Tuần 5 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.6-week6/"
  title="Worklog Tuần 6"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.6-week6/">
     <b> 1.6. </b> Worklog Tuần 6 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.7-week7/"
  title="Worklog Tuần 7"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.7-week7/">
     <b> 1.7. </b> Worklog Tuần 7 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.8-week8/"
  title="Worklog Tuần 8"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.8-week8/">
     <b> 1.8. </b> Worklog Tuần 8 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.9-week9/"
  title="Worklog Tuần 9"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.9-week9/">
     <b> 1.9. </b> Worklog Tuần 9 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.10-week10/"
  title="Worklog Tuần 10"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.10-week10/">
     <b> 1.10. </b> Worklog Tuần 10 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.11-week11/"
  title="Worklog Tuần 11"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.11-week11/">
     <b> 1.11. </b> Worklog Tuần 11 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.12-week12/"
  title="Worklog Tuần 12"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.12-week12/">
     <b> 1.12. </b> Worklog Tuần 12 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
     
  </ul>
  
</li>
           
<li
  data-nav-id="/vi/2-proposal/"
  title="Bản đề xuất"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/2-proposal/">
     <b> 2. </b> Bản đề xuất 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
           
<li
  data-nav-id="/vi/3-blogstranslated/"
  title="Các bài blogs đã dịch"
  class="dd-item 
        parent
        
        
        "
>
  <a href="../../../vi/3-blogstranslated/">
     <b> 3. </b> Các bài blogs đã dịch 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
  <ul>
          
            
<li
  data-nav-id="/vi/3-blogstranslated/3.1-blog1/"
  title="Blog 1"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/3-blogstranslated/3.1-blog1/">
     <b> 3.1. </b> Blog 1 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/3-blogstranslated/3.2-blog2/"
  title="Blog 2"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/3-blogstranslated/3.2-blog2/">
     <b> 3.2. </b> Blog 2 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/3-blogstranslated/3.3-blog3/"
  title="Blog 3"
  class="dd-item 
        
        active
        
        "
>
  <a href="../../../vi/3-blogstranslated/3.3-blog3/">
     <b> 3.3. </b> Blog 3 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/3-blogstranslated/3.4-blog4/"
  title="Blog 4"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/3-blogstranslated/3.4-blog4/">
     <b> 3.4. </b> Blog 4 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/3-blogstranslated/3.5-blog5/"
  title="Blog 5"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/3-blogstranslated/3.5-blog5/">
     <b> 3.5. </b> Blog 5 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/3-blogstranslated/3.6-blog6/"
  title="Blog 6"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/3-blogstranslated/3.6-blog6/">
     <b> 3.6. </b> Blog 6 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/3-blogstranslated/3.7-blog7/"
  title="Blog 7"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/3-blogstranslated/3.7-blog7/">
     <b> 3.7. </b> Blog 7 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/3-blogstranslated/3.8-blog8/"
  title="Blog 8"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/3-blogstranslated/3.8-blog8/">
     <b> 3.8. </b> Blog 8 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/3-blogstranslated/3.9-blog9/"
  title="Blog 9"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/3-blogstranslated/3.9-blog9/">
     <b> 3.9. </b> Blog 9 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/3-blogstranslated/3.10-blog10/"
  title="Blog 10"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/3-blogstranslated/3.10-blog10/">
     <b> 3.10. </b> Blog 10 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/3-blogstranslated/3.11-blog11/"
  title="Blog 11"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/3-blogstranslated/3.11-blog11/">
     <b> 3.11. </b> Blog 11 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/3-blogstranslated/3.12-blog12/"
  title="Blog 12"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/3-blogstranslated/3.12-blog12/">
     <b> 3.12. </b> Blog 12 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
     
  </ul>
  
</li>
           
<li
  data-nav-id="/vi/4-eventparticipated/"
  title="Các events đã tham gia"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/4-eventparticipated/">
     <b> 4. </b> Các events đã tham gia 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
  <ul>
          
            
<li
  data-nav-id="/vi/4-eventparticipated/4.1-event1/"
  title="Event 1"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/4-eventparticipated/4.1-event1/">
     <b> 4.1. </b> Event 1 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
     
  </ul>
  
</li>
           
<li
  data-nav-id="/vi/5-workshop/"
  title="Workshop"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/">
     <b> 5. </b> Workshop 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
  <ul>
          
            
<li
  data-nav-id="/vi/5-workshop/5.1-workshop-overview/"
  title="Giới thiệu"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.1-workshop-overview/">
     <b> 5.1. </b> Giới thiệu 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.2-prerequiste/"
  title="Các bước chuẩn bị"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.2-prerequiste/">
     <b> 5.2. </b> Các bước chuẩn bị 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.3-infra-terraform/"
  title="Thiết lập Infrastructure với Terraform"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.3-infra-terraform/">
     <b> 5.3. </b> Thiết lập Infrastructure với Terraform 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
  <ul>
          
            
<li
  data-nav-id="/vi/5-workshop/5.3-infra-terraform/5.3.1-provider/"
  title="Cấu hình Provider"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.3-infra-terraform/5.3.1-provider/">
     <b> 5.3.1. </b> Cấu hình Provider 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.3-infra-terraform/5.3.2-variables/"
  title="Cấu hình Variables"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.3-infra-terraform/5.3.2-variables/">
     <b> 5.3.2. </b> Cấu hình Variables 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.3-infra-terraform/5.3.3-env-variable/"
  title="Cấu hình Variables cục bộ"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.3-infra-terraform/5.3.3-env-variable/">
     <b> 5.3.3. </b> Cấu hình Variables cục bộ 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.3-infra-terraform/5.3.4-s3-bucket/"
  title="Cấu hình S3 Bucket"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.3-infra-terraform/5.3.4-s3-bucket/">
     <b> 5.3.4. </b> Cấu hình S3 Bucket 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.3-infra-terraform/5.3.5-ecr/"
  title="Cấu hình ECR Repository"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.3-infra-terraform/5.3.5-ecr/">
     <b> 5.3.5. </b> Cấu hình ECR Repository 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.3-infra-terraform/5.3.6-ecs-cluster/"
  title="Cấu hình ECS Cluster"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.3-infra-terraform/5.3.6-ecs-cluster/">
     <b> 5.3.6. </b> Cấu hình ECS Cluster 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.3-infra-terraform/5.3.7-alb/"
  title="Cấu hình Application Load Balancer và Target Group"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.3-infra-terraform/5.3.7-alb/">
     <b> 5.3.7. </b> Cấu hình Application Load Balancer và Target Group 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.3-infra-terraform/5.3.8-iam/"
  title="Cấu hình IAM Roles và Policies"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.3-infra-terraform/5.3.8-iam/">
     <b> 5.3.8. </b> Cấu hình IAM Roles và Policies 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.3-infra-terraform/5.3.9-cloudwatch-ecsservices/"
  title="Cấu hình CloudWatch Logs &amp; ECS Service"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.3-infra-terraform/5.3.9-cloudwatch-ecsservices/">
     <b> 5.3.9. </b> Cấu hình CloudWatch Logs &amp; ECS Service 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.3-infra-terraform/5.3.10-budgets/"
  title="Cấu hình AWS Budgets"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.3-infra-terraform/5.3.10-budgets/">
     <b> 5.3.10. </b> Cấu hình AWS Budgets 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.3-infra-terraform/5.3.11-vpc/"
  title="Cấu hình VPC"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.3-infra-terraform/5.3.11-vpc/">
     <b> 5.3.11. </b> Cấu hình VPC 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
     
  </ul>
  
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.4-docker-deploybe/"
  title="Build Docker Image và Deploy Backend"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.4-docker-deploybe/">
     <b> 5.4. </b> Build Docker Image và Deploy Backend 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.5-deployfe/"
  title="Triển khai Frontend với Amazon Amplify và thực hiện kết nối an toàn với API của Backend"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.5-deployfe/">
     <b> 5.5 </b> Triển khai Frontend với Amazon Amplify và thực hiện kết nối an toàn với API của Backend 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
  <ul>
          
            
<li
  data-nav-id="/vi/5-workshop/5.5-deployfe/5.5.1-deploy-frontend/"
  title="Triển khai Frontend với Amplify"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.5-deployfe/5.5.1-deploy-frontend/">
     <b> 5.5.1 </b> Triển khai Frontend với Amplify 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.5-deployfe/5.5.2-connect-be-fe/"
  title="Cấu hình để kết nối giữa Frontend và Backend"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.5-deployfe/5.5.2-connect-be-fe/">
     <b> 5.5.2 </b> Cấu hình để kết nối giữa Frontend và Backend 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.5-deployfe/5.5.3-custom-domain-be/"
  title="Cấu hình Custom Domain với Route53 và xác thực SSL với AWS Certificate Manager"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.5-deployfe/5.5.3-custom-domain-be/">
     <b> 5.5.3 </b> Cấu hình Custom Domain với Route53 và xác thực SSL với AWS Certificate Manager 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.5-deployfe/5.5.4-custom-domain-fe/"
  title="Tùy chỉnh Domain cho Amplify Frontend"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.5-deployfe/5.5.4-custom-domain-fe/">
     <b> 5.5.4 </b> Tùy chỉnh Domain cho Amplify Frontend 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
     
  </ul>
  
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.6-cleanup/"
  title="Dọn dẹp tài nguyên"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.6-cleanup/">
     <b> 5.6. </b> Dọn dẹp tài nguyên 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
     
  </ul>
  
</li>
           
<li
  data-nav-id="/vi/6-self-evaluation/"
  title="Tự đánh giá"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/6-self-evaluation/">
     <b> 6. </b> Tự đánh giá 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
           
<li
  data-nav-id="/vi/7-feedback/"
  title="Chia sẻ, đóng góp ý kiến"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/7-feedback/">
     <b> 7. </b> Chia sẻ, đóng góp ý kiến 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
    </ul>

     
    <section id="shortcuts">
      <h3>
        More
      </h3>
      <ul>
        
        <li>
          <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj/"
            ><i class='fab fa-facebook'></i> AWS Study Group</a
          >
        </li>
        
      </ul>
    </section>
     
    <section id="prefooter">
      <hr />
      <ul>
        
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
            <div class="select-style">
              <select id="select-language" onchange="location = this.value;">
                       
                <option
                  id="en"
                  value="http://localhost:1313/workshop-template/3-blogstranslated/3.3-blog3/"
                >
                  English
                </option>
                            
                <option
                  id="vi"
                  value="http://localhost:1313/workshop-template/vi/3-blogstranslated/3.3-blog3/"
                  selected
                >
                  Tiếng Việt
                </option>
                   
              </select>
              <svg
                version="1.1"
                id="Capa_1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                x="0px"
                y="0px"
                width="255px"
                height="255px"
                viewBox="0 0 255 255"
                style="enable-background: new 0 0 255 255"
                xml:space="preserve"
              >
                <g>
                  <g id="arrow-drop-down">
                    <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
                  </g>
                </g>
              </svg>
            </div>
          </a>
        </li>
         
        <li>
          <a class="padding" href="#" data-clear-history-toggle=""
            ><i class="fas fa-history fa-fw"></i> Clear History</a
          >
        </li>
        
      </ul>
    </section>
    
    <section id="footer"><left>
    
    <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0"
        title="Migrate" Alt="web counter" border="0" /></a> <br>
    <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0"
        title="Total CLoud Journey" Alt="web counter" border="0" />

</left>
<left>
    <br>
    <br>
    <b>Last Updated</b><br>
    <i>
        <span id="lastUpdated" style="color:orange;"></span>
    </i>

    <script>
        
        const today = new Date();
        
        const formattedDate = today.toLocaleDateString('en-GB');
        
        document.getElementById('lastUpdated').textContent = formattedDate;
    </script>
</left>
<left>
    <br>
    <br>
    <b> Team </b> <br>

    <i> <a href="https://www.facebook.com/groups/660548818043427" style="color:orange">First Cloud Journey </a> <br>

    </i>
</left>

<script async defer src="https://buttons.github.io/buttons.js"></script></section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='../../../vi/'>Báo cáo thực tập</a> > <a href='../../../vi/3-blogstranslated/'>Các bài blogs đã dịch</a> > Blog 3
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
  <div class="wrapper"><nav id="TableOfContents">
  <ul>
    <li><a href="#tại-sao-nên-tách-biệt-phân-quyền-với-cedar">Tại sao nên tách biệt phân quyền với Cedar?</a></li>
    <li><a href="#tổng-quan-api-ứng-dụng-pet-store">Tổng quan API ứng dụng Pet Store</a></li>
    <li><a href="#triển-khai-phân-quyền-cho-api-pet-store">Triển khai phân quyền cho API Pet Store</a>
      <ul>
        <li><a href="#thêm-gói-cedar-authorization-middleware">Thêm gói Cedar Authorization Middleware</a></li>
        <li><a href="#tạo-schema-cedar-từ-api-của-bạn">Tạo Schema Cedar từ API của bạn</a></li>
        <li><a href="#định-nghĩa-các-chính-sách-phân-quyền">Định nghĩa các chính sách phân quyền</a></li>
        <li><a href="#cập-nhật-mã-ứng-dụng-để-gọi-cedar-và-phân-quyền-truy-cập-api">Cập nhật mã ứng dụng để gọi Cedar và phân quyền truy cập API</a></li>
        <li><a href="#thêm-mã-ứng-dụng-để-cấu-hình-người-dùng">Thêm mã ứng dụng để cấu hình người dùng</a></li>
      </ul>
    </li>
    <li><a href="#cập-nhật-middleware-xác-thực">Cập nhật middleware xác thực</a></li>
    <li><a href="#xác-thực-bảo-mật-api">Xác thực bảo mật API</a></li>
    <li><a href="#kết-luận">Kết luận</a></li>
  </ul>
</nav></div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Blog 3
            </h1>
          

        



	<h1 id="bảo-mật-api-ứng-dụng-express-trong-5-phút-với-cedar">Bảo mật API ứng dụng Express trong 5 phút với Cedar</h1>
<p>Hôm nay, dự án mã nguồn mở <a href="https://www.cedarpolicy.com/">Cedar</a> đã công bố phiên bản <a href="https://github.com/cedar-policy/authorization-for-expressjs"><code>authorization-for-expressjs</code></a>, một gói mã nguồn mở giúp đơn giản hóa việc sử dụng ngôn ngữ chính sách Cedar và công cụ phân quyền để xác minh quyền truy cập ứng dụng. Phiên bản này cho phép các nhà phát triển thêm phân quyền dựa trên chính sách vào API framework web Express của họ trong vài phút, và không cần thực hiện bất kỳ cuộc gọi dịch vụ từ xa nào.</p>
<p><a href="https://expressjs.com/">Express</a> là một framework ứng dụng web Node.js tối giản và linh hoạt cung cấp một bộ tính năng mạnh mẽ cho các ứng dụng web và di động. Tích hợp chuẩn hóa này với Cedar yêu cầu ít hơn 90% mã so với việc các nhà phát triển tự viết các mẫu tích hợp, giúp tiết kiệm thời gian và công sức cho các nhà phát triển và cải thiện tư thế bảo mật ứng dụng bằng cách giảm lượng mã tích hợp tùy chỉnh.</p>
<p>Ví dụ, nếu bạn đang xây dựng một ứng dụng cửa hàng thú cưng sử dụng framework Express, sử dụng tính năng authorization-for-expressjs bạn có thể tạo các chính sách phân quyền để chỉ nhân viên cửa hàng mới có thể truy cập API để thêm thú cưng. Triển khai chuẩn hóa này cho middleware phân quyền Express thay thế nhu cầu về mã tùy chỉnh và tự động ánh xạ các yêu cầu khách hàng thành các thành phần principal, action và resource của chúng, sau đó thành các yêu cầu phân quyền Cedar.</p>
<h2 id="tại-sao-nên-tách-biệt-phân-quyền-với-cedar">Tại sao nên tách biệt phân quyền với Cedar?</h2>
<p>Truyền thống, các nhà phát triển triển khai phân quyền trong ứng dụng của họ bằng cách nhúng logic phân quyền trực tiếp vào mã ứng dụng. Logic phân quyền được nhúng này được thiết kế để hỗ trợ một vài quyền, nhưng khi ứng dụng phát triển, thường có nhu cầu hỗ trợ các trường hợp sử dụng phức tạp hơn với các yêu cầu phân quyền bổ sung. Các nhà phát triển cập nhật từng bước logic phân quyền được nhúng để hỗ trợ các trường hợp sử dụng phức tạp này, dẫn đến mã phức tạp và khó bảo trì. Khi độ phức tạp của mã tăng lên, việc phát triển thêm mô hình bảo mật và thực hiện kiểm toán quyền trở nên khó khăn hơn, dẫn đến một ứng dụng liên tục trở nên khó bảo trì hơn trong suốt vòng đời của nó.</p>
<p>Cedar cho phép bạn tách biệt logic phân quyền khỏi ứng dụng của bạn. Việc tách biệt phân quyền khỏi mã ứng dụng mang lại nhiều lợi ích bao gồm giải phóng các nhóm phát triển để tập trung vào logic ứng dụng và đơn giản hóa việc kiểm toán ứng dụng và truy cập tài nguyên. Cedar là một <a href="https://github.com/cedar-policy/">ngôn ngữ mã nguồn mở và bộ công cụ phát triển phần mềm (SDK)</a> để viết và thực thi các chính sách phân quyền cho ứng dụng của bạn. Bạn chỉ định các quyền chi tiết như các chính sách Cedar, và ứng dụng của bạn phân quyền các yêu cầu truy cập bằng cách gọi Cedar SDK. Ví dụ, bạn có thể sử dụng chính sách Cedar bên dưới để cho phép người dùng nhân viên gọi API <code>POST /pets</code> trong ứng dụng PetStore mẫu.</p>
<pre tabindex="0"><code>permit (
    principal,
    action in [Action::&#34;POST /pets&#34;], 
    resource
) when {
    principal.jobLevel = &#34;employee&#34;
};
</code></pre><p>Một thách thức tiềm ẩn trong việc áp dụng Cedar có thể là nỗ lực ban đầu cần thiết để định nghĩa các chính sách Cedar và cập nhật mã ứng dụng của bạn để gọi Cedar SDK để phân quyền các yêu cầu API. Bài đăng blog này cho thấy cách các nhà phát triển ứng dụng web sử dụng framework Express có thể dễ dàng triển khai phân quyền cấp API với Cedar—chỉ thêm vài chục dòng mã trong ứng dụng của bạn, thay vì hàng trăm dòng.</p>
<p>Hướng dẫn từng bước này sử dụng ứng dụng PetStore mẫu để cho thấy cách truy cập vào API có thể được hạn chế dựa trên các nhóm người dùng. Bạn có thể tìm thấy ứng dụng Pet Store mẫu trong <a href="https://github.com/cedar-policy/authorization-for-expressjs/tree/main/examples">kho lưu trữ cedar-policy</a> trên GitHub.</p>
<h2 id="tổng-quan-api-ứng-dụng-pet-store">Tổng quan API ứng dụng Pet Store</h2>
<p>Ứng dụng PetStore được sử dụng để quản lý một cửa hàng thú cưng. Cửa hàng thú cưng được xây dựng bằng Express trên Node.js và expose các API sau:</p>
<ol>
<li><strong>GET /pets</strong> – trả về một trang các thú cưng có sẵn trong PetStore.</li>
<li><strong>POST /pets</strong> – thêm thú cưng được chỉ định vào PetStore.</li>
<li><strong>GET /pets/{petId}</strong> – trả về thú cưng được chỉ định tìm thấy trong PetStore.</li>
<li><strong>POST /pets/{petId}/sale</strong> – đánh dấu một thú cưng là đã bán.</li>
</ol>
<p>Ứng dụng này không cho phép tất cả người dùng truy cập tất cả API. Thay vào đó, nó thực thi các quy tắc sau:</p>
<p>Cả người dùng khách hàng và nhân viên đều được phép thực hiện các thao tác đọc.</p>
<p><code>GET /pets</code></p>
<p><code>GET /pets/{petId}</code></p>
<p>Chỉ nhân viên mới được phép thực hiện các thao tác ghi.</p>
<p><code>POST /pets</code></p>
<p><code>POST /pets/{petId}/sale</code></p>
<h2 id="triển-khai-phân-quyền-cho-api-pet-store">Triển khai phân quyền cho API Pet Store</h2>
<p>Hãy cùng đi qua cách bảo mật API ứng dụng của bạn bằng Cedar sử dụng gói mới cho Express. Ứng dụng ban đầu, không có phân quyền, có thể được tìm thấy trong thư mục <code>start</code>; sử dụng cái này để theo dõi cùng với blog. Bạn có thể tìm thấy ứng dụng hoàn chỉnh, với phân quyền đã được thêm vào, trong thư mục <code>finish</code>.</p>
<h3 id="thêm-gói-cedar-authorization-middleware">Thêm gói Cedar Authorization Middleware</h3>
<p>Gói Cedar Authorization Middleware sẽ được sử dụng để tạo schema Cedar, tạo các chính sách phân quyền mẫu và thực hiện phân quyền trong ứng dụng của bạn.</p>
<p>Chạy lệnh <code>npm</code> này để thêm dependency <code>@cedar-policy/authorization-for-expressjs</code> vào ứng dụng của bạn.</p>
<pre tabindex="0"><code>npm i --save @cedar-policy/authorization-for-expressjs 
</code></pre><h3 id="tạo-schema-cedar-từ-api-của-bạn">Tạo Schema Cedar từ API của bạn</h3>
<p>Schema Cedar định nghĩa mô hình phân quyền cho một ứng dụng, bao gồm các loại thực thể trong ứng dụng và các hành động mà người dùng được phép thực hiện. Các chính sách của bạn được xác thực với schema này khi bạn chạy ứng dụng.</p>
<p>Gói <code>authorization-for-expressjs</code> có thể phân tích <a href="https://swagger.io/specification/">đặc tả OpenAPI</a> của ứng dụng của bạn và tạo schema Cedar. Cụ thể, đối tượng <code>paths</code> là bắt buộc trong đặc tả của bạn.</p>
<p>Lưu ý: Nếu bạn không có đặc tả OpenAPI, bạn có thể tạo một cái bằng công cụ bạn chọn. Có một số thư viện mã nguồn mở để làm điều này cho Express; bạn có thể cần thêm một số mã vào ứng dụng của bạn, tạo đặc tả OpenAPI, và sau đó xóa mã đó. Ngoài ra, một số công cụ dựa trên AI sinh tạo như CLI <a href="https://aws.amazon.com/q/developer/">Amazon Q Developer</a> rất hiệu quả trong việc tạo các tài liệu đặc tả OpenAPI. Bất kể bạn tạo đặc tả như thế nào, hãy đảm bảo xác thực đầu ra chính xác từ công cụ.</p>
<p>Đối với ứng dụng mẫu, một tài liệu đặc tả OpenAPI có tên <code>openapi.json</code> đã được bao gồm.</p>
<p>Với đặc tả OpenAPI, bạn có thể tạo schema Cedar bằng cách chạy lệnh <code>generateSchema</code> được liệt kê ở đây.</p>
<pre tabindex="0"><code>// schema được lưu trữ trong file v4.cedarschema.json trong root của package.

npx @cedar-policy/authorization-for-expressjs generate-schema --api-spec openapi.json --namespace PetStoreApp --mapping-type SimpleRest
</code></pre><h3 id="định-nghĩa-các-chính-sách-phân-quyền">Định nghĩa các chính sách phân quyền</h3>
<p>Nếu không có chính sách nào được cấu hình, Cedar sẽ từ chối tất cả các yêu cầu phân quyền. Chúng ta sẽ thêm các chính sách cấp quyền truy cập vào API chỉ trong các nhóm người dùng được ủy quyền.</p>
<p>Chạy lệnh này để tạo các chính sách Cedar mẫu. Sau đó bạn có thể tùy chỉnh các chính sách này dựa trên trường hợp sử dụng của bạn.</p>
<pre tabindex="0"><code>npx @cedar-policy/authorization-for-expressjs generate-policies --schema v4.cedarschema.json
</code></pre><p>Trong ứng dụng PetStore, hai chính sách mẫu được tạo, <code>policy_1.cedar</code> và <code>policy_2.cedar</code>.</p>
<p>policy_1.cedar cung cấp quyền cho người dùng trong nhóm người dùng admin để thực hiện bất kỳ hành động nào trên bất kỳ tài nguyên nào.</p>
<pre tabindex="0"><code>// policy_1.cedar
// Cho phép nhóm người dùng admin truy cập mọi thứ
permit (
    principal in PetStoreApp::UserGroup::&#34;admin&#34;,
    action,
    resource
);
</code></pre><p>policy_2.cedar cung cấp quyền truy cập chi tiết hơn cho tất cả các hành động riêng lẻ được định nghĩa trong schema Cedar với một placeholder cho một nhóm cụ thể.</p>
<pre tabindex="0"><code>// policy_2.cedar
// Cho phép kiểm soát nhóm người dùng chi tiết hơn, thay đổi hành động theo nhu cầu
permit (
    principal in PetStoreApp::UserGroup::&#34;ENTER_THE_USER_GROUP_HERE&#34;,
    action in
        [PetStoreApp::Action::&#34;GET /pets&#34;,
         PetStoreApp::Action::&#34;POST /pets&#34;,
         PetStoreApp::Action::&#34;GET /pets/{petId}&#34;,
         PetStoreApp::Action::&#34;POST /pets/{petId}/sale&#34;],
    resource
);
</code></pre><p>Lưu ý rằng nếu bạn chỉ định một <code>operationId</code> trong đặc tả OpenAPI, tên hành động được định nghĩa trong Schema Cedar sẽ sử dụng <code>operationId</code> đó thay vì định dạng mặc định &ldquo;<HTTP Method> /<PATH>&rdquo;. Trong trường hợp này, đảm bảo việc đặt tên Actions trong Chính sách Cedar của bạn khớp với việc đặt tên Actions trong Schema Cedar của bạn.</p>
<p>Ví dụ, nếu bạn muốn gọi hành động của bạn là <code>AddPet</code> thay vì <code>POST /pets</code>, bạn có thể đặt <code>operationId</code> trong đặc tả OpenAPI của bạn thành <code>AddPet</code>. Hành động kết quả trong chính sách Cedar sẽ là <code>PetStoreApp::Action::&quot;AddPet&quot;</code></p>
<p>Vì chúng ta không có người dùng <code>admin</code> trong trường hợp sử dụng của chúng ta, chúng ta có thể chỉ thay thế nội dung của <code>policy_1.cedar</code> bằng các chính sách được sử dụng cho nhóm người dùng <code>customer</code>.</p>
<p>Trong trường hợp sử dụng thực tế, hãy cân nhắc đổi tên các file chính sách Cedar của bạn dựa trên nội dung của chúng. Ví dụ, <code>allow_customer_group.cedar</code></p>
<pre tabindex="0"><code>// policy_1.cedar
// Cho phép nhóm người dùng customer truy cập getAllPets và getPetById
permit (
    principal in PetStoreApp::UserGroup::&#34;customer&#34;,
    action in
        [PetStoreApp::Action::&#34;GET /pets&#34;,
         PetStoreApp::Action::&#34;GET /pets/{petId}&#34;],
    resource
);
</code></pre><p>Người dùng <code>employee</code> có quyền truy cập tất cả các thao tác API. Chúng ta có thể chỉ cần thêm nhóm <code>employee</code> vào file <code>policy_2.cedar</code> để đáp ứng các yêu cầu phân quyền cho người dùng <code>employee</code>.</p>
<pre tabindex="0"><code>// policy_2.cedar
// Cho phép nhóm người dùng employee truy cập tất cả các hành động API
permit (
    principal in PetStoreApp::UserGroup::&#34;employee&#34;,
    action in
        [PetStoreApp::Action::&#34;GET /pets&#34;,
         PetStoreApp::Action::&#34;POST /pets&#34;,
         PetStoreApp::Action::&#34;GET /pets/{petId}&#34;,
         PetStoreApp::Action::&#34;POST /pets/{petId}/sale&#34;],
    resource
);
</code></pre><p>Lưu ý: Đối với các ứng dụng lớn với các chính sách phân quyền phức tạp, có thể khó khăn để phân tích và kiểm toán các quyền thực tế được cung cấp bởi nhiều chính sách khác nhau. Chúng tôi cũng gần đây đã mã nguồn mở <a href="https://github.com/cedar-policy/cedar-spec">Cedar Analysis CLI</a> để giúp các nhà phát triển thực hiện phân tích chính sách trên các chính sách của họ. Bạn có thể tìm hiểu thêm về công cụ mới này trong bài đăng blog <a href="https://aws.amazon.com/blogs/opensource/introducing-cedar-analysis-open-source-tools-for-verifying-authorization-policies">Introducing Cedar Analysis: Open Source Tools for Verifying Authorization Policies.</a></p>
<h3 id="cập-nhật-mã-ứng-dụng-để-gọi-cedar-và-phân-quyền-truy-cập-api">Cập nhật mã ứng dụng để gọi Cedar và phân quyền truy cập API</h3>
<p>Ứng dụng sẽ sử dụng middleware Cedar để phân quyền mọi yêu cầu với các chính sách Cedar. Trước đó chúng ta đã cài đặt dependency, bây giờ chúng ta cần cập nhật mã.</p>
<p>Đầu tiên thêm gói vào dự án và định nghĩa <code>CedarInlineAuthorizationEngine</code> và <code>ExpressAuthorizationMiddleware</code>. Khối mã này có thể được thêm vào đầu file <code>app.js</code>.</p>
<pre tabindex="0"><code>const { ExpressAuthorizationMiddleware, CedarInlineAuthorizationEngine } = require (&#39;@cedar-policy/authorization-for-expressjs&#39;);


const policies = [
    fs.readFileSync(path.join(__dirname, &#39;policies&#39;, &#39;policy_1.cedar&#39;), &#39;utf8&#39;),
    fs.readFileSync(path.join(__dirname, &#39;policies&#39;, &#39;policy_2.cedar&#39;), &#39;utf8&#39;)
];



const cedarAuthorizationEngine = new CedarInlineAuthorizationEngine({
    staticPolicies: policies.join(&#39;\n&#39;),
    schema: {
        type: &#39;jsonString&#39;,
        schema: fs.readFileSync(path.join(__dirname, &#39;v4.cedarschema.json&#39;), &#39;utf8&#39;),
    }
});


const expressAuthorization = new ExpressAuthorizationMiddleware({
    schema: {
        type: &#39;jsonString&#39;,
        schema: fs.readFileSync(path.join(__dirname, &#39;v4.cedarschema.json&#39;), &#39;utf8&#39;),
    },
    authorizationEngine: cedarAuthorizationEngine,
    principalConfiguration: {
        type: &#39;custom&#39;,
        getPrincipalEntity: principalEntityFetcher
    },
    skippedEndpoints: [
        {httpVerb: &#39;get&#39;, path: &#39;/login&#39;},
        {httpVerb: &#39;get&#39;, path: &#39;/api-spec/v3&#39;},
    ],
    logger: {
        debug: s =&gt; console.log(s),
        log: s =&gt; console.log(s),
    }
});
</code></pre><p>Tiếp theo thêm middleware Express Authorization vào ứng dụng</p>
<pre tabindex="0"><code>const app = express();

app.use(express.json());
app.use(verifyToken())   // xác thực token người dùng
// ... các middleware pre-authz khác

app.use(expressAuthorization.middleware);

// ... các middleware pre-authz khác
</code></pre><h3 id="thêm-mã-ứng-dụng-để-cấu-hình-người-dùng">Thêm mã ứng dụng để cấu hình người dùng</h3>
<p>Công cụ phân quyền Cedar yêu cầu các nhóm người dùng và thuộc tính để phân quyền các yêu cầu. Middleware phân quyền dựa vào hàm được truyền cho <code>getPrincipalEntity</code> trong cấu hình ban đầu để tạo thực thể principal. Bạn cần triển khai hàm này để tạo thực thể người dùng.</p>
<p>Mã ví dụ này cung cấp một hàm để tạo thực thể người dùng. Nó giả định rằng người dùng đã được xác thực bởi một middleware trước đó và thông tin liên quan được lưu trữ trong đối tượng request. Nó cũng giả định rằng user sub đã được lưu trữ trong trường <code>req.user.sub</code> và các nhóm người dùng đã được lưu trữ trong trường <code>req.user.groups</code>.</p>
<pre tabindex="0"><code>
async function principalEntityFetcher(req) {
       
       const user = req.user;   // đây là thực hành phổ biến cho middleware authn để lưu trữ thông tin người dùng từ token đã giải mã ở đây
       const userGroups = user[&#34;groups&#34;].map(userGroupId =&gt; ({
           type: &#39;PetStoreApp::UserGroup&#39;,
           id: userGroupId       
       }));
       return {
            uid: {
                type: &#39;PetStoreApp::User&#39;,
                id: user.sub
            },
            attrs: {
                ...user,
            },
            parents: userGroups 
        };
} 
</code></pre><h2 id="cập-nhật-middleware-xác-thực">Cập nhật middleware xác thực</h2>
<p>Đối với ứng dụng PetStore mẫu, middleware xác thực được cung cấp bởi mã trong <code>middleware/authnMiddleware.js</code> phân tích một JSON web token (JWT) được bao gồm trong header Authorization của yêu cầu và lưu trữ các giá trị liên quan trong đối tượng request.</p>
<p>Lưu ý: authnMiddleware.js chỉ được sử dụng cho mục đích minh họa và không nên thay thế middleware xác thực token thực tế của bạn trong ứng dụng thực tế.</p>
<p>Để cập nhật middleware xác thực để sử dụng nhà cung cấp danh tính OpenID Connect (OIDC) của riêng bạn, cập nhật <code>jwksUri</code> trong khối mã sau của <code>middleware/authnMiddleware.js</code> để bao gồm JSON web key set (JWKS) uri của nhà cung cấp danh tính của bạn.</p>
<pre tabindex="0"><code>const client = jwksClient({
  jwksUri: &#39;&lt;jwks uri cho nhà cung cấp danh tính oidc của bạn&gt;&#39;,
  cache: true,
  cacheMaxEntries: 5,
  cacheMaxAge: 600000 // 10 phút
}); 
</code></pre><p>Tiếp theo cập nhật <code>issuer</code> trong khối mã sau để bao gồm issuer uri của nhà cung cấp danh tính của bạn.</p>
<pre tabindex="0"><code> jwt.verify(token, getSigningKey, {
    algorithms: [&#39;RS256&#39;],
    issuer: `&lt;issuer uri cho nhà cung cấp danh tính oidc của bạn&gt;`
  }, (err, decoded) =&gt; {
    if (err) {
      console.error(&#39;JWT verification error:&#39;, err);
      return res.status(401).json({ message: &#39;Invalid token&#39; });
    }
    
    // Thêm token đã giải mã vào đối tượng request
    req.user = decoded;
    next();
  });
</code></pre><p>Nếu bạn không có quyền truy cập vào nhà cung cấp danh tính OIDC để sử dụng với mẫu này, để mục đích kiểm tra, bạn có thể thay thế toàn bộ hàm <code>verifyToken</code> và chỉ ánh xạ một thực thể người dùng mẫu vào đối tượng request. Ví dụ, thay thế <code>verifyToken</code> bằng cái này:</p>
<pre tabindex="0"><code>const verifyToken = (req, res, next) =&gt; {

    // Thêm thực thể người dùng mẫu vào đối tượng request
    // Để kiểm tra nhóm employee, thay đổi &#34;customer&#34; thành &#34;employee&#34;
    req.user = {
        &#34;sub&#34;: &#34;some-user-id&#34;,
        &#34;groups&#34;: &#34;customer&#34;
    };

};
</code></pre><h2 id="xác-thực-bảo-mật-api">Xác thực bảo mật API</h2>
<p>Bạn có thể xác thực các chính sách và quyền truy cập API của bạn bằng cách gọi ứng dụng sử dụng các lệnh <code>curl</code> dựa trên terminal. Chúng tôi giả định rằng ứng dụng đang sử dụng nhà cung cấp danh tính OIDC để quản lý người dùng và JWT token được truyền trong header authorization cho các yêu cầu API.</p>
<p>Để dễ đọc, một bộ biến môi trường được sử dụng để đại diện cho các giá trị thực tế. <code>TOKEN_CUSTOMER</code> chứa các token danh tính hợp lệ cho người dùng trong nhóm employee. <code>API_BASE_URL</code> là URL cơ sở cho PetStore API nhỏ.</p>
<p>Để kiểm tra rằng một khách hàng được phép gọi <code>GET /pets</code>, chạy lệnh <code>curl</code> này. Yêu cầu sẽ hoàn thành thành công.</p>
<pre tabindex="0"><code>curl -H &#34;Authorization: Bearer ${TOKEN_CUSTOMER}&#34; -X GET ${API_BASE_URL}/pets
</code></pre><p>Yêu cầu thành công sẽ trả về danh sách thú cưng. Ban đầu, Pet Store có một thú cưng và trả về phản hồi tương tự như này.</p>
<pre tabindex="0"><code>[{&#34;id&#34;:&#34;6da5d01b-89fd-49b9-acb2-b457b79669d5&#34;,&#34;name&#34;:&#34;Fido&#34;,&#34;species&#34;:&#34;Dog&#34;,&#34;breed&#34;:null,&#34;age&#34;:null,&#34;sold&#34;:false}]
</code></pre><p>Để kiểm tra rằng một khách hàng không được phép gọi <code>POST /pets</code>, chạy lệnh <code>curl</code> này. Bạn sẽ nhận được thông báo lỗi rằng yêu cầu không được ủy quyền.</p>
<pre tabindex="0"><code>curl -H &#34;Authorization: Bearer ${TOKEN_CUSTOMER}&#34; -X POST ${API_BASE_URL}/pets
</code></pre><p>Yêu cầu không được ủy quyền sẽ trả về Not authorized with explicit deny</p>
<h2 id="kết-luận">Kết luận</h2>
<p>Gói <code>authorization-for-expressjs</code> mới cho phép các nhà phát triển tích hợp ứng dụng của họ với Cedar để tách biệt logic phân quyền khỏi mã chỉ trong vài phút. Bằng cách tách biệt logic phân quyền và tích hợp ứng dụng của bạn với Cedar, bạn có thể vừa cải thiện năng suất của nhà phát triển, vừa đơn giản hóa việc kiểm toán quyền và truy cập.</p>
<p>Các gói framework là mã nguồn mở và có sẵn trên GitHub dưới giấy phép Apache 2.0, với phân phối thông qua NPM. Để tìm hiểu thêm về Cedar và thử nghiệm nó bằng playground ngôn ngữ, hãy truy cập <a href="https://www.cedarpolicy.com/">https://www.cedarpolicy.com/</a>. Hãy thoải mái gửi câu hỏi, nhận xét và đề xuất thông qua không gian làm việc Cedar Slack công khai, <a href="https://cedar-policy.slack.com">https://cedar-policy.slack.com</a>.</p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="../../../vi/3-blogstranslated/3.2-blog2/" title="Blog 2"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="../../../vi/3-blogstranslated/3.4-blog4/" title="Blog 4" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../../../js/clipboard.min.js?1765294695"></script>
    <script src="../../../js/perfect-scrollbar.min.js?1765294695"></script>
    <script src="../../../js/perfect-scrollbar.jquery.min.js?1765294695"></script>
    <script src="../../../js/jquery.sticky.js?1765294695"></script>
    <script src="../../../js/featherlight.min.js?1765294695"></script>
    <script src="../../../js/highlight.pack.js?1765294695"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../../../js/modernizr.custom-3.6.0.js?1765294695"></script>
    <script src="../../../js/learn.js?1765294695"></script>
    <script src="../../../js/hugo-learn.js?1765294695"></script>

    <link href="../../../mermaid/mermaid.css?1765294695" rel="stylesheet" />
    <script src="../../../mermaid/mermaid.js?1765294695"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function (i, s, o, g, r, a, m) {
    i["GoogleAnalyticsObject"] = r;
    ((i[r] =
      i[r] ||
      function () {
        (i[r].q = i[r].q || []).push(arguments);
      }),
      (i[r].l = 1 * new Date()));
    ((a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]));
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m);
  })(
    window,
    document,
    "script",
    "https://www.google-analytics.com/analytics.js",
    "ga",
  );

  ga("create", "UA-158079754-2", "auto");
  ga("send", "pageview");
</script>

  </body>
</html>
